<template>
  <div class="app">
<!--    <Header title="the Anime Quoter"/>-->
<!--    <Quote :quote="tquote" />-->
    <div id="container">
      <h1>&bull; اختبر مدى احتمالية تعرض اسم طفلك لإشكالية تشابه الأسماء &bull;</h1>
      <div class="underline">
      </div>
      <div class="icon_wrapper">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" height="145.3125pt" version="1.1" viewBox="0 0 145.3125 145.3125" width="145.3125pt">
          <g id="surface1">
            <path d="M 72.65625 0 C 32.53125 0 0 32.53125 0 72.65625 C 0 112.777344 32.53125 145.3125 72.65625 145.3125 C 112.777344 145.3125 145.3125 112.777344 145.3125 72.65625 C 145.269531 32.546875 112.765625 0.0429688 72.65625 0 Z M 72.65625 142.164062 C 34.257812 142.164062 3.132812 111.035156 3.132812 72.636719 C 3.132812 34.25 34.257812 3.121094 72.65625 3.121094 C 111.054688 3.121094 142.171875 34.25 142.171875 72.636719 C 142.171875 72.640625 142.171875 72.652344 142.171875 72.65625 C 142.132812 111.035156 111.035156 142.132812 72.65625 142.171875 Z M 72.65625 142.164062 " style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" />
            <path d="M 102.859375 20.625 L 102.753906 20.527344 L 102.613281 20.527344 C 93.511719 15.242188 83.179688 12.460938 72.65625 12.453125 C 62.140625 12.445312 51.8125 15.210938 42.699219 20.464844 L 42.558594 20.464844 L 42.453125 20.554688 C 33.402344 25.851562 25.882812 33.394531 20.625 42.453125 L 20.527344 42.558594 C 20.527344 42.609375 20.527344 42.65625 20.527344 42.699219 C 15.242188 51.800781 12.460938 62.132812 12.453125 72.65625 C 12.453125 89.40625 19.4375 105.390625 31.738281 116.753906 L 31.738281 116.851562 C 31.796875 116.894531 31.859375 116.9375 31.929688 116.972656 C 54.917969 138.128906 90.28125 138.128906 113.277344 116.972656 C 113.335938 116.9375 113.390625 116.894531 113.445312 116.851562 L 113.445312 116.753906 C 134.066406 97.757812 138.792969 67.015625 124.828125 42.699219 C 124.835938 42.65625 124.835938 42.609375 124.828125 42.558594 L 124.734375 42.453125 C 119.453125 33.40625 111.914062 25.882812 102.859375 20.625 Z M 72.65625 129.722656 C 58.945312 129.730469 45.6875 124.78125 35.347656 115.78125 C 56.761719 97.246094 88.535156 97.246094 109.945312 115.78125 C 99.609375 124.773438 86.363281 129.730469 72.65625 129.722656 Z M 116.5625 47.34375 C 117 48.09375 117.964844 48.34375 118.710938 47.910156 C 118.710938 47.910156 118.710938 47.910156 118.710938 47.90625 L 122.835938 45.492188 C 127.105469 53.363281 129.449219 62.132812 129.671875 71.089844 L 124.878906 71.089844 C 124.007812 71.089844 123.3125 71.789062 123.3125 72.65625 C 123.3125 73.519531 124.007812 74.222656 124.878906 74.222656 L 129.671875 74.222656 C 129.273438 89.136719 123.027344 103.296875 112.285156 113.648438 C 89.605469 93.773438 55.707031 93.773438 33.027344 113.648438 C 22.285156 103.296875 16.039062 89.136719 15.632812 74.222656 L 20.433594 74.222656 C 21.296875 74.222656 22 73.519531 22 72.65625 C 22 71.789062 21.296875 71.089844 20.433594 71.089844 L 15.632812 71.089844 C 15.863281 62.132812 18.207031 53.363281 22.46875 45.492188 L 26.640625 47.894531 C 27.414062 48.296875 28.355469 48 28.757812 47.226562 C 29.136719 46.507812 28.902344 45.617188 28.207031 45.175781 L 24.042969 42.855469 C 28.753906 35.199219 35.199219 28.753906 42.855469 24.042969 L 45.257812 28.179688 C 45.722656 28.910156 46.6875 29.125 47.421875 28.664062 C 48.117188 28.222656 48.34375 27.328125 47.972656 26.609375 L 45.492188 22.46875 C 53.363281 18.207031 62.132812 15.863281 71.089844 15.632812 L 71.089844 20.433594 C 71.089844 21.296875 71.789062 22 72.65625 22 C 73.519531 22 74.222656 21.296875 74.222656 20.433594 L 74.222656 15.632812 C 83.179688 15.863281 91.949219 18.207031 99.8125 22.46875 L 97.417969 26.640625 C 96.953125 27.375 97.167969 28.34375 97.898438 28.808594 C 98.632812 29.273438 99.59375 29.058594 100.070312 28.324219 C 100.082031 28.289062 100.109375 28.25 100.125 28.207031 L 102.453125 24.042969 C 110.109375 28.753906 116.558594 35.199219 121.269531 42.855469 L 117.132812 45.257812 C 116.414062 45.6875 116.167969 46.609375 116.5625 47.34375 Z M 116.5625 47.34375 " style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" />
            <path d="M 108.867188 49.980469 L 67.367188 62.820312 C 64.917969 63.625 62.972656 65.511719 62.113281 67.949219 C 59.746094 74.21875 62.898438 81.226562 69.171875 83.597656 C 69.929688 83.886719 70.722656 84.101562 71.527344 84.226562 C 72 84.300781 72.484375 84.335938 72.96875 84.335938 C 75.035156 84.371094 77.03125 83.601562 78.550781 82.207031 L 110.40625 52.632812 C 111.054688 52.054688 111.109375 51.058594 110.53125 50.414062 C 110.113281 49.929688 109.433594 49.761719 108.835938 49.980469 Z M 76.402344 79.78125 C 75.195312 80.84375 73.5625 81.296875 71.984375 81 C 67.070312 80.160156 63.765625 75.511719 64.601562 70.601562 C 64.691406 70.042969 64.839844 69.5 65.035156 68.96875 C 65.5625 67.453125 66.765625 66.265625 68.296875 65.75 L 103.195312 54.964844 Z M 76.402344 79.78125 " style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" />
            <path d="M 66.070312 72.65625 C 66.070312 76.292969 69.019531 79.242188 72.65625 79.242188 C 76.292969 79.242188 79.242188 76.292969 79.242188 72.65625 C 79.242188 69.019531 76.292969 66.070312 72.65625 66.070312 C 69.019531 66.070312 66.070312 69.019531 66.070312 72.65625 Z M 72.65625 69.210938 C 74.5625 69.210938 76.101562 70.75 76.101562 72.65625 C 76.101562 74.5625 74.5625 76.101562 72.65625 76.101562 C 70.75 76.101562 69.210938 74.5625 69.210938 72.65625 C 69.210938 70.75 70.75 69.210938 72.65625 69.210938 Z M 72.65625 69.210938 " style=" stroke:none;fill-rule:nonzero;fill:rgb(0%,0%,0%);fill-opacity:1;" />
          </g>
        </svg>
        <div id="result"> مؤشر الاحتمالية </div>
      </div>
      <form  method="get" id="contact_form">
        <div class="name">
          <label for="name1"></label>
          <input type="text" placeholder="اسم الجد" name="name1" id="Gfather" >
        </div>
        <div class="email">
          <label for="email"></label>
          <input type="text" placeholder="اسم الأب" name="email" id="father" >
        </div>
        <div class="telephone">
          <label for="name"></label>
          <input type="text" placeholder="اسم الأبن" name="telephone" id="son" >
        </div>
        <div class="submit">
          <input type="button" value="اختبر الآن" id="form_button" @click="gen" />
        </div>

      </form><!-- // End form -->
    </div><!-- // End #container -->

  </div>
</template>

<script>

export default {
  name: 'App',
  components: {

  },
  data() {
    return {
      tquote: {
        content: '',
        anime: '',
        char: '',
        test: ''
      },
      quotes: []
    }
  },
  methods: {


  async gen() {
      var father = document.getElementById('father').value;
    var Gfather = document.getElementById('Gfather').value;
    var son = document.getElementById('son').value;
    const url = "https://docs.google.com/spreadsheets/d/1VIQuPwzhLWlRM92CwGHdPglQrEzaTp9O/export?format=csv"

    const mydata = await fetch(url).then(res => res.text());
    const lines = mydata.split('\n') // 1️⃣
    const header = lines[0].split(',') // 2️⃣
    const output = lines.slice(1).map(line => {
      const fields = line.split(',') // 3️⃣
      return Object.fromEntries(header.map((h, i) => [h, fields[i]])) // 4️⃣

    })

    // var allnames = output.map(el =>  el.second == 'عزالدين' );
    var allnames = output.filter(el =>  el.second == father && el.third == Gfather && el.first == son );
    console.log(allnames.length)
    var freq = allnames.length;

    if (freq >= 5) {
      document.getElementById('result').innerHTML =
        ' احتمالية التشابه مرتفعة جدًا، على الأغلب يوجد هناك ' + " " + freq*2000 + " " + "شخص بنفس الاسم، وقد يوجد من بينهم حوالي" + " " + (freq*2000)*(0.001) + " " + " شخص مُدان بأحكام قضائية "
    }
    else if (freq <= 1) {
      document.getElementById('result').innerHTML =
        ' احتمالية التشابه منخفضة، اختيار هذا الاسم سوف يكون اختيار آمن بإذن الله ' 
    }

    }

  },

}
</script>

<style>

html {
  font-family: 'Dubai', Arial, sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
}

body {
  background: #F2F3EB;
  direction: rtl;
}

button {
  overflow: visible;
  font-family: 'Cairo';
}

button, select {
  text-transform: none;
}

button, input, select, textarea {
  color: #5A5A5A;
  font: inherit;
  margin: 0;
}

input {
  line-height: normal;
}

textarea {
  overflow: auto;
}

#container {
  border: solid 3px #474544;
  max-width: 768px;
  margin: 60px auto;
  position: relative;
}

form {
  padding: 37.5px;
  margin: 50px 0;
}

h1 {
  color: #474544;
  font-size: 25px;
  font-weight: 500;
  letter-spacing: 1px;
  text-align: center;
  text-transform: uppercase;
}

.underline {
  border-bottom: solid 2px #474544;
  margin: -0.512em auto;
  width: 80px;
}

.icon_wrapper {
  margin: 50px auto 0;
  width: 100%;
}

.icon {
  display: block;
  fill: #474544;
  height: 50px;
  margin: 0 auto;
  width: 50px;
}
#result {
  display: block;
  fill: #474544;
  height: 10px;
  margin: 0 auto;
  font-size: 20px;
  font-family: 'Dubai', Arial, sans-serif;
  width: 100%;
  text-align: center;
  font-weight: 400;
  color: #474544;
}

.email {
  float: right;
  width: 45%;
}

input[type='text'], [type='email'], select, textarea {
  background: none;
  border: none;
  border-bottom: solid 2px #474544;
  color: #474544;
  font-size: 1.000em;
  font-weight: 400;
  letter-spacing: 1px;
  margin: 0em 0 1.875em 0;
  padding: 0 0 0.875em 0;
  text-transform: uppercase;
  width: 100%;
  -webkit-box-sizing: border-box;
  -moz-box-sizing: border-box;
  -ms-box-sizing: border-box;
  -o-box-sizing: border-box;
  box-sizing: border-box;
  -webkit-transition: all 0.3s;
  -moz-transition: all 0.3s;
  -ms-transition: all 0.3s;
  -o-transition: all 0.3s;
  transition: all 0.3s;
}

input[type='text']:focus, [type='email']:focus, textarea:focus {
  outline: none;
  padding: 0 0 0.875em 0;
}

.message {
  float: none;
}

.name {
  float: left;
  width: 45%;
}

select {
  background: url('https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-ios7-arrow-down-32.png') no-repeat right;
  outline: none;
  -moz-appearance: none;
  -webkit-appearance: none;
}

select::-ms-expand {
  display: none;
}

.subject {
  width: 100%;
}

.telephone {
  width: 100%;
}

textarea {
  line-height: 150%;
  height: 150px;
  resize: none;
  width: 100%;
}

::-webkit-input-placeholder {
  color: #474544;
}

:-moz-placeholder {
  color: #474544;
  opacity: 1;
}

::-moz-placeholder {
  color: #474544;
  opacity: 1;
}

:-ms-input-placeholder {
  color: #474544;
}

#form_button {
  background: none;
  border: solid 2px #474544;
  color: #474544;
  cursor: pointer;
  display: inline-block;
  font-family: 'Cairo', Arial, sans-serif;
  font-size: 0.875em;
  font-weight: bold;
  outline: none;
  padding: 10px 25px;
  text-transform: uppercase;
  -webkit-transition: all 0.3s;
  -moz-transition: all 0.3s;
  -ms-transition: all 0.3s;
  -o-transition: all 0.3s;
  transition: all 0.3s;
  margin-bottom: -15px;
  margin-top: 30px;
}

#form_button:hover {
  background: #474544;
  color: #F2F3EB;
}

@media screen and (max-width: 768px) {
  #container {
    margin: 20px auto;
    width: 95%;
  }
}

@media screen and (max-width: 480px) {
  h1 {
    font-size: 26px;
  }

  .underline {
    width: 68px;
  }

  #form_button {
    padding: 15px 25px;
  }
}

@media screen and (max-width: 420px) {
  h1 {
    font-size: 18px;
  }

  .icon {
    height: 35px;
    width: 35px;
  }

  .underline {
    width: 53px;
  }

  input[type='text'], [type='email'], select, textarea {
    font-size: 0.875em;
  }
}
</style>
